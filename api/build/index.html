
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
    <link href="images/favicon.ico" rel="icon" type="image/ico" />
  </head>

  <body class="index" data-languages="[&quot;ruby&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="ruby">Ruby</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <ul id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#authentication" class="toc-h2 toc-link" data-title="Authentication">Authentication</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users" class="toc-h1 toc-link" data-title="Users">Users</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-user-object" class="toc-h2 toc-link" data-title="The User Object">The User Object</a>
                  </li>
                  <li>
                    <a href="#add-a-user" class="toc-h2 toc-link" data-title="Add a User">Add a User</a>
                  </li>
                  <li>
                    <a href="#retrieve-a-user" class="toc-h2 toc-link" data-title="Retrieve a User">Retrieve a User</a>
                  </li>
                  <li>
                    <a href="#list-users" class="toc-h2 toc-link" data-title="List Users">List Users</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users-kyc-details" class="toc-h1 toc-link" data-title="Users KYC Details">Users KYC Details</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-user-kyc-detail-object" class="toc-h2 toc-link" data-title="The User KYC Detail Object">The User KYC Detail Object</a>
                  </li>
                  <li>
                    <a href="#add-or-update-user-kyc-details" class="toc-h2 toc-link" data-title="Add or Update User KYC Details">Add or Update User KYC Details</a>
                  </li>
                  <li>
                    <a href="#retrieve-user-kyc-details" class="toc-h2 toc-link" data-title="Retrieve User KYC Details">Retrieve User KYC Details</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#users-kyc-status" class="toc-h1 toc-link" data-title="Users KYC Status">Users KYC Status</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#the-user-kyc-object" class="toc-h2 toc-link" data-title="The User KYC Object">The User KYC Object</a>
                  </li>
                  <li>
                    <a href="#retrieve-kyc-status" class="toc-h2 toc-link" data-title="Retrieve KYC Status">Retrieve KYC Status</a>
                  </li>
                  <li>
                    <a href="#list-kyc-statuses" class="toc-h2 toc-link" data-title="List KYC Statuses">List KYC Statuses</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#utilities" class="toc-h1 toc-link" data-title="Utilities">Utilities</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#get-pre-signed-url-put" class="toc-h2 toc-link" data-title="Get Pre-signed URL - PUT">Get Pre-signed URL - PUT</a>
                  </li>
                  <li>
                    <a href="#get-pre-signed-url-post" class="toc-h2 toc-link" data-title="Get Pre-signed URL - POST">Get Pre-signed URL - POST</a>
                  </li>
                  <li>
                    <a href="#validate-ethereum-address" class="toc-h2 toc-link" data-title="Validate Ethereum Address">Validate Ethereum Address</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#webhooks" class="toc-h1 toc-link" data-title="WebHooks">WebHooks</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#creat-a-webhook" class="toc-h2 toc-link" data-title="Creat A Webhook">Creat A Webhook</a>
                  </li>
                  <li>
                    <a href="#important-details" class="toc-h2 toc-link" data-title="Important Details">Important Details</a>
                  </li>
                  <li>
                    <a href="#signature-generation" class="toc-h2 toc-link" data-title="Signature Generation">Signature Generation</a>
                  </li>
                  <li>
                    <a href="#user-events" class="toc-h2 toc-link" data-title="User Events">User Events</a>
                  </li>
                  <li>
                    <a href="#user-kyc-events" class="toc-h2 toc-link" data-title="User KYC Events">User KYC Events</a>
                  </li>
              </ul>
          </li>
          <li>
            <a href="#errors" class="toc-h1 toc-link" data-title="Errors">Errors</a>
          </li>
      </ul>
        <ul class="toc-footer">
            <li>Documentation Powered by Slate</li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>OST KYC is the first plug-and-play KYC/AML management solution for token sales to process
thousands of applicants smoothly and securely. Once you sign up for the KYC services and an OST KYC client account is activated, the following details are provided :</p>

<table><thead>
<tr>
<th>Account Activation</th>
<th>Elements</th>
</tr>
</thead><tbody>
<tr>
<td></td>
<td><img width=1200/></td>
</tr>
<tr>
<td><u><strong>Account Details</strong></u></td>
<td>Link to KYC Dashboard <br> Login Credentials for KYC Dashboard <br> Link to Cynopsis Environment <br>Login credentials to Cynopsis Environment</td>
</tr>
<tr>
<td><u><strong>API Access:​</strong></u> API access is authorized using secret key. Please share the key with trusted entities only.</td>
<td>API Key <br> API Secret Key</td>
</tr>
<tr>
<td><u><strong>Whitelisting Address:​</strong></u> This is the address which will be communicating to the Sale contract to whitelist registered Eth addresses. This is also known as Verified Operator Address.</td>
<td>Whitelisting Address</td>
</tr>
<tr>
<td><u><strong>DNS records for domain verification:</strong></u>It is required to add the DNS records for the domain authentication in the DNS provider in order to start sending emails.</td>
<td>DNS records will be provided in the form of a CSV file.</td>
</tr>
<tr>
<td><u><strong>Participating Countries:</strong></u> ​This is the list of countries and nationalities in yml file format to be used in the submission formfor API validation. This list shall be adjusted by the client based on his specific requirements.</td>
<td>List of Countries and Nationalities.</td>
</tr>
</tbody></table>

<p>As part of the complete solution one of the product offerings is the robust set of OST KYC APIs. They allow access to several functionality used for KYC/AML verification. Here are the APIs that we deliver through OST KYC.</p>
<h2 id='authentication'>Authentication</h2>
<blockquote>
<p>To authorize, you can use this sample code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rails'</span>
<span class="c1"># Generate Signature</span>
<span class="k">def</span> <span class="nf">generate_signature</span><span class="p">(</span><span class="n">string_to_sign</span><span class="p">)</span>
  <span class="n">digest</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">)</span>
  <span class="nb">puts</span> <span class="s2">"--------string_to_sign=&gt;</span><span class="si">#{</span><span class="n">string_to_sign</span><span class="si">}</span><span class="s2">-----"</span>
  <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="s1">'API_SECRET'</span><span class="p">,</span> <span class="n">string_to_sign</span><span class="p">)</span> <span class="c1"># Make sure to replace `API_SECRET` with your API secret key.</span>
<span class="k">end</span>
<span class="c1"># Create Base Parameters</span>
<span class="k">def</span> <span class="nf">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_time</span> <span class="o">=</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">custom_params</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="s2">"request_timestamp"</span> <span class="o">=&gt;</span> <span class="n">request_time</span><span class="p">,</span> <span class="s2">"api_key"</span> <span class="o">=&gt;</span> <span class="s1">'API_KEY'</span><span class="p">)</span> <span class="c1"># Make sure to replace `API_KEY` with your API key.</span>
  <span class="n">query_param</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span><span class="p">.</span><span class="nf">gsub</span><span class="p">(</span><span class="sr">/^&amp;/</span><span class="p">,</span> <span class="s1">''</span><span class="p">)</span>
  <span class="n">str</span> <span class="o">=</span> <span class="s2">"</span><span class="si">#{</span><span class="n">endpoint</span><span class="si">}</span><span class="s2">?</span><span class="si">#{</span><span class="n">query_param</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">str</span><span class="p">)</span>
  <span class="n">request_params</span><span class="p">.</span><span class="nf">merge!</span><span class="p">(</span><span class="s2">"signature"</span> <span class="o">=&gt;</span> <span class="n">signature</span><span class="p">)</span>
  <span class="n">request_params</span>
<span class="k">end</span>
<span class="n">custom_params</span> <span class="o">=</span> <span class="p">{</span><span class="ss">email: </span><span class="s1">'kyc@ost.com'</span><span class="p">}</span>
<span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users"</span>
<span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
</code></pre>
<p>Every API request on <code>https://kyc.ost.com/api/v2</code> requires hash-based message authentication. Every request has three mandatory parameters that must be included:</p>

<ul>
<li>api_key :  the API key as provided post KYC client account activation.</li>
<li>request_timestamp : the current unix timestamp in seconds.</li>
<li>signature : the signature as the sha256 digest of the API secret and the correctly formatted query string as described below.</li>
</ul>

<aside class="warning">The request timestamp will be valid for up to ten seconds. Your computer clock must therefore be synchronised for authentication to succeed.</aside>

<p>You can implement the signature generation by computing the HMAC sha256 digest of the API secret and the query string. The resulting signature must be then included in the request.</p>
<h3 id='1-creating-the-string-to-sign'>1. Creating the string to sign.</h3>
<p>To generate the signature you must first form the string to sign. This string to sign can be formed by concatenation of the following elements:</p>

<ul>
<li>API endpoint</li>
<li>api_key</li>
<li>request_timestamp</li>
<li>API parameters</li>
</ul>

<aside class="warning">Note all the inputs must be alphabetically sorted on the keys. (asc)</aside>
<h3 id='2-generating-a-signature'>2. Generating a signature.</h3>
<p>The signature is the sha256 digest of the shared API secret and the correctly formatted query string.</p>

<p>generated_signature = Hmac_Sha256_Hexdigest(string-to-sign, api-secret)</p>

<aside class="warning">Please ensure that the final URL is encoded while making the API request.</aside>

<p>For a Post request, the parameters are sent in the request body with default content-type <code>application/x-www-form-urlencoded</code>  so the request body uses the same format as the query string.</p>
<h1 id='users'>Users</h1><h2 id='the-user-object'>The User Object</h2>
<blockquote>
<p>Sample User Object :</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11428</span><span class="p">,</span><span class="w">
  </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser@ost.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"kyc_submitted"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"doptin_mail_sent"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"doptin_done"</span><span class="w">
            </span><span class="p">],</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539163614</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>PARAMETER</th>
<th>TYPE</th>
<th>DESCRIPTION</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>bigint</td>
<td>Unique identifier for the user</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>Email Id of the user</td>
</tr>
<tr>
<td>properties</td>
<td>array<strings></td>
<td>Properties of the user:<br> &quot;kyc_submitted&quot;,<br> &quot;doptin_mail_sent&quot;,<br> &quot;doptin_done&quot;.<br> Remains empty when the user is created.</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp</td>
<td>Timestamp at which user was created. (epoch time in seconds)</td>
</tr>
</tbody></table>
<h2 id='add-a-user'>Add a User</h2>
<blockquote>
<p>Example Request code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>
<span class="c1"># setup http request</span>
  <span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
     <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
     <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
     <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
     <span class="n">http</span>
  <span class="k">end</span>
<span class="c1"># Make a Post Request</span>
<span class="k">def</span> <span class="nf">make_post_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">path</span><span class="p">,</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>  
<span class="c1"># create user</span>
<span class="k">def</span> <span class="nf">create_user</span><span class="p">(</span><span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users"</span>
  <span class="n">make_post_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">create_user</span><span class="p">({</span><span class="ss">email: </span><span class="s1">'kyc@ost.com'</span><span class="p">})</span>

</code></pre>
<p>A POST to <code>https://kyc.ost.com/api/v2/users</code> creates a new <code>user</code> object for the user in OST KYC database. Only user&#39;s signup information is sent via this endpoint. For sending user&#39;s KYC details a POST request to a different endpoint <code>/users-kyc/{{user_id}}</code> has to be sent.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>email</td>
<td>string</td>
<td>yes</td>
<td>A unique email id of the user whose KYC entry has to be made</td>
</tr>
</tbody></table>

<aside class="warning"> This API cannot be used by OST KYC clients who are using OST KYC Frontend solution.</aside>

<p><u><strong>Returns</strong></u><br>
For api calls to <code>/users</code> the data.result_type is the string &quot;user&quot; and the key data.user is a user object. On successful creation of the user, user contains the created user as a single element. The returned user object will return an ID in it that can be used to fetch the user information using the retrieve user endpoint.</p>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11428</span><span class="p">,</span><span class="w">
         </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser@ost.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539163614</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='retrieve-a-user'>Retrieve a User</h2>
<blockquote>
<p>Example Request code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>
<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>  
<span class="c1"># retrieve a user</span>
<span class="k">def</span> <span class="nf">get_user</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
      <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users/</span><span class="si">#{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">"</span>
      <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">get_user</span><span class="p">(</span><span class="mi">11428</span><span class="p">)</span>
</code></pre>
<p>A GET to <code>https://kyc.ost.com/api/v2/users/{id}</code> retrieves the information of an existing user. You need to supply the identifier that was returned upon user creation.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>bigint</td>
<td>yes</td>
<td>Unique identifier of the user whose information is to be retrieved</td>
</tr>
</tbody></table>

<p><u><strong>Returns</strong></u><br>
For api calls to <code>/users</code> the data.result_type is the string &quot;user&quot; and the key data.user is a user object if a valid identifier was provided. When the requesting ID of a user is not found a 404, resource could not be located error will be returned.</p>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11428</span><span class="p">,</span><span class="w">
         </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser@ost.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539163614</span><span class="w">
    </span><span class="p">}</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Error Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"err"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"internal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"um_u_g_favu_2"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"The requested resource could not be located."</span><span class="p">,</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"NOT_FOUND"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='list-users'>List Users</h2>
<blockquote>
<p>Example Request code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>
<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span> 
<span class="c1"># Get user list</span>
<span class="k">def</span> <span class="nf">get_user_list</span><span class="p">(</span><span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">get_user_list</span><span class="p">({</span><span class="ss">page_number: </span><span class="mi">1</span><span class="p">,</span> <span class="ss">order: </span><span class="s1">'desc'</span><span class="p">,</span> <span class="ss">filters: </span><span class="p">{</span><span class="ss">email: </span><span class="s2">"kycuser"</span><span class="p">},</span> <span class="ss">limit: </span><span class="mi">10</span><span class="p">})</span>

</code></pre>
<p>A GET to <code>https://kyc.ost.com/api/v2/users</code> returns a list of all users who have signed up. This doesn&#39;t imply that all these users have submitted their required KYC details. The users are returned sorted by creation date, with the most recent users appearing first. </p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>filters</td>
<td>object</td>
<td>no</td>
<td>A filter on the list based on the object <code>filters</code> field. The value can be a boolean or a string</td>
</tr>
<tr>
<td>page_number</td>
<td>integer</td>
<td>no</td>
<td>A field that helps in pagination. page_number is an integer that defines the page of  the list to fetch. For instance, if you make a list request and receive 100 objects, each page sends 10 objects as default limit is 10. If you want to access 45th object your subsequent call can include page_number=5 in order to fetch the 5th page of the list</td>
</tr>
<tr>
<td>order</td>
<td>string</td>
<td>no</td>
<td>A sort order to be applied based on the user creation time. default is desc ( asc / desc )</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>no</td>
<td>A limit on the number of user objects to be sent in one request(min. 1, max. 100, default 10)</td>
</tr>
</tbody></table>

<p><br>
<u><strong>Filter Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>is_kyc_submitted</td>
<td>boolean</td>
<td>no</td>
<td>A filter on users list who have submitted there kyc data. (true/false)</td>
</tr>
<tr>
<td>is_doptin_done</td>
<td>boolean</td>
<td>no</td>
<td>A filter on users list who have done email double opt in.(true/false)</td>
</tr>
<tr>
<td>is_doptin_mail_sent</td>
<td>boolean</td>
<td>no</td>
<td>A filter on users list who have been sent the double opt in email. (true/false)</td>
</tr>
<tr>
<td>email</td>
<td>string</td>
<td>no</td>
<td>A filter on the users list based on the user&#39;s email field.</td>
</tr>
</tbody></table>

<p><br>
<u><strong>Returns</strong></u><br></p>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"users"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11442</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser10@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539339413</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11430</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser9@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"kyc_submitted"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539169109</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11429</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser8@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539169086</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11428</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser7@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539163614</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11427</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser6@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"kyc_submitted"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539154855</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11426</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser5@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"kyc_submitted"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539092212</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11420</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser4@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"kyc_submitted"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538992711</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11417</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser3@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
               </span><span class="s2">"kyc_submitted"</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538979927</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11414</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser2@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538747355</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11413</span><span class="p">,</span><span class="w">
            </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser1@ost.com"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538747119</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">39</span><span class="p">,</span><span class="w">
         </span><span class="s2">"next_page_payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"page_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"filters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
              </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kycuser"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>For api calls to <code>/users</code> the data.result_type is the string &quot;users&quot; and the key data.users is an array of the returned user objects (10 users per page). The field data.meta.next_page_payload contains the filter and order information and the page_no number for the next page or is empty for the last page of the list.</p>

<p>Passing an optional email will result in filtering of users with that email address. Each entry in the array is a separate user object. If no more user are available, the resulting array will be empty without an error thrown.</p>
<h1 id='users-kyc-details'>Users KYC Details</h1><h2 id='the-user-kyc-detail-object'>The User KYC Detail Object</h2>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">727</span><span class="p">,</span><span class="w">
  </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539622156</span><span class="p">,</span><span class="w">
  </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sawant"</span><span class="p">,</span><span class="w">                 
  </span><span class="s2">"birthdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23/07/1991"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INDIA"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"nationality"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INDIAN"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"document_id_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ab0bd1234"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"document_id_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/anm15395b85581eab3068cb43ftc0rt1_ROTATE_0?X-Amz-Algorithm=AWS4-HMAC-SHA256.."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"selfie_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/b3vvte895rt5581eab3068cb43ftc0vg1_ROTATE_0?X-Amz-Algorithm=AWS4-HMAC-SHA256.."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"residence_proof_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/bty153op985581eab3068cb43ftcqw21_ROTATE_0?X-Amz.."</span><span class="p">,</span><span class="w">
  </span><span class="s2">"investor_proof_files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/a3991395b852serab3068cb43ftc0f61_ROTATE_0?X-Amz.."</span><span class="p">,</span><span class="w">
      </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/a5565395b85581eiop3068cb43ftc0f61_ROTATE_0?X-Amz.."</span><span class="w">
  </span><span class="p">],</span><span class="w">
  </span><span class="s2">"ethereum_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xEC305b4c269dEd899b6fBA12776fbbDBdC564793"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"estimated_participation_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1</span><span class="p">,</span><span class="w">
  </span><span class="s2">"street_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hadapsar"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pune"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maharashtra"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"411028"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>PARAMETER</th>
<th>TYPE</th>
<th>DESCRIPTION</th>
</tr>
</thead><tbody>
<tr>
<td></td>
<td></td>
<td><img width=1000/></td>
</tr>
<tr>
<td>id</td>
<td>bigint</td>
<td>Unique identifier of the last submitted kyc of a user.</td>
</tr>
<tr>
<td>first_name</td>
<td>string</td>
<td>The user&#39;s first name.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>The user&#39;s last name.</td>
</tr>
<tr>
<td>birthdate</td>
<td>string</td>
<td>The user&#39;s birthdate in dd/mm/yyyy format.</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>The user&#39;s country of residence.</td>
</tr>
<tr>
<td>nationality</td>
<td>string</td>
<td>The user&#39;s nationality.</td>
</tr>
<tr>
<td>document_id_number</td>
<td>string</td>
<td>The users identification number from their identification document.</td>
</tr>
<tr>
<td>document_id_file</td>
<td>string</td>
<td>S3 file url of the document id file. This link expires in 12 hours.</td>
</tr>
<tr>
<td>selfie_file</td>
<td>string</td>
<td>S3 file url of the selfile file. This link expires in 12 hours.</td>
</tr>
<tr>
<td>residence_proof_file</td>
<td>string</td>
<td>S3 file url of the residence proof file. This link expires in 12 hours.</td>
</tr>
<tr>
<td>investor_proof_files</td>
<td>array&lt;string&gt;</td>
<td>An array of S3 file urls of investor proof files. These links expire in 12 hours</td>
</tr>
<tr>
<td>ethereum_address</td>
<td>string</td>
<td>Ethereum address from where the user intends to transfer Eth to company to buy tokens</td>
</tr>
<tr>
<td>estimated_participation_amount</td>
<td>float</td>
<td>Estimated participation amount that user intends to invest during the token sale</td>
</tr>
<tr>
<td>street_address</td>
<td>string</td>
<td>The user&#39;s current address</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>The user&#39;s current city of residence</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>The user&#39;s state</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>Postal code</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp</td>
<td>Timestamp at which kyc was submitted. (epoch time in seconds)</td>
</tr>
</tbody></table>
<h2 id='add-or-update-user-kyc-details'>Add or Update User KYC Details</h2>
<blockquote>
<p>Example Request code :</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>
<span class="c1"># setup http request</span>
  <span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
     <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
     <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
     <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
     <span class="n">http</span>
  <span class="k">end</span>
<span class="c1"># Make a Post Request</span>
<span class="k">def</span> <span class="nf">make_post_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">path</span><span class="p">,</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>  
<span class="c1"># Submit KYC details request</span>
<span class="k">def</span> <span class="nf">submit_kyc</span><span class="p">(</span><span class="n">user_id</span><span class="p">,</span> <span class="n">custom_params</span><span class="o">=</span><span class="p">{})</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users-kyc/</span><span class="si">#{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">custom_params</span> <span class="o">=</span> <span class="n">custom_params</span>
  <span class="n">make_post_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">submit_kyc</span><span class="p">(</span><span class="mi">11420</span><span class="p">,</span> <span class="p">{</span><span class="n">first_name</span><span class="ss">:'YOGESH'</span><span class="p">,</span>  <span class="n">last_name</span><span class="ss">:'SAWANT'</span><span class="p">,</span>  <span class="n">birthdate</span><span class="ss">:'29/07/1992'</span><span class="p">,</span> <span class="n">country</span><span class="ss">:'INDIA'</span><span class="p">,</span> <span class="n">nationality</span><span class="ss">:'INDIAN'</span><span class="p">,</span> <span class="n">document_id_number</span><span class="ss">:'DMDPS9634C'</span><span class="p">,</span> <span class="n">document_id_file_path</span><span class="ss">:'10/i/4ae058629d4b384edcda8decdfbf0dd1'</span><span class="p">,</span> <span class="n">selfie_file_path</span><span class="ss">:'10/i/4ae058629d4b384edcda8decdfbf0dd2'</span><span class="p">,</span> <span class="n">ethereum_address</span><span class="ss">:'0x04d39e0b112c20917868ffd5c42372ecc5df577b'</span><span class="p">,</span><span class="n">estimated_participation_amount</span><span class="ss">:'1.2'</span><span class="p">,</span><span class="n">residence_proof_file_path</span><span class="ss">:'10/i/4ae058629d4b384edcda8decdfbf0dd3'</span><span class="p">,</span><span class="ss">investor_proof_files_path: </span><span class="p">[</span><span class="s1">'10/i/4ae058629d4b384edcda8decdfbf0da1'</span><span class="p">,</span> <span class="s1">'10/i/4ae058629d4b384edcda8decdfbf0da2'</span><span class="p">],</span> <span class="n">city</span><span class="ss">:'pune'</span><span class="p">,</span><span class="n">street_address</span><span class="ss">:'hadapsar'</span><span class="p">,</span><span class="n">postal_code</span><span class="ss">:'411028'</span><span class="p">,</span><span class="n">state</span><span class="ss">:'maharashtra'</span><span class="p">})</span>
</code></pre>
<p>A POST to <code>https://kyc.ost.com/api/v2/users-kyc/{{user_id}}</code> creates a new <code>user-kyc-detail</code> object for a user with the details provided through the input parameters. The same endpoint has to be used to update a user&#39;s KYC details in case of re-submissions. All parameters are required to be re-sent in an update request. You need to supply the user identifier as part of the endpoint that was returned upon user creation.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>first_name</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s first name.</td>
</tr>
<tr>
<td>last_name</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s last name.</td>
</tr>
<tr>
<td>birthdate</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s birthdate in dd/mm/yyyy format.</td>
</tr>
<tr>
<td>country</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s country of residence.</td>
</tr>
<tr>
<td>nationality</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s nationality.</td>
</tr>
<tr>
<td>document_id_number</td>
<td>string</td>
<td>yes</td>
<td>The users identification number from their identification document.</td>
</tr>
<tr>
<td>document_id_file_path</td>
<td>string</td>
<td>yes</td>
<td>File path of the document id file. The value for this parameter is fetched from the response object of Get Pre-Signed URL endpoint.</td>
</tr>
<tr>
<td>selfie_file_path</td>
<td>string</td>
<td>yes</td>
<td>File path of the selfile file. The value for this parameter is fetched from the response object of Get Pre-Signed URL endpoint.</td>
</tr>
<tr>
<td>residence_proof_file_path</td>
<td>string</td>
<td>no</td>
<td>File path of the residence proof file. The value for this parameter is fetched from the response object of Get Pre-Signed URL endpoint.</td>
</tr>
<tr>
<td>investor_proof_files_path</td>
<td>array&lt;string&gt;</td>
<td>no</td>
<td>An array of file paths of investor proof files. The value for this parameter is fetched from the response object of Get Pre-Signed URL endpoint.</td>
</tr>
<tr>
<td>ethereum_address</td>
<td>string</td>
<td>yes</td>
<td>Ethereum address from where the user intends to transfer Eth to company to buy tokens</td>
</tr>
<tr>
<td>estimated_participation_amount</td>
<td>float</td>
<td>yes</td>
<td>Estimated participation amount that user intends to invest during the token sale</td>
</tr>
<tr>
<td>street_address</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s current address</td>
</tr>
<tr>
<td>city</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s current city of residence</td>
</tr>
<tr>
<td>state</td>
<td>string</td>
<td>yes</td>
<td>The user&#39;s state</td>
</tr>
<tr>
<td>postal_code</td>
<td>string</td>
<td>yes</td>
<td>Postal_code</td>
</tr>
</tbody></table>

<p>The Input parameters above list all the fields accepted as input. KYC clients should send only those fields which they have selected for their users&#39; kyc.</p>

<p><br></p>

<p><u><strong>Returns</strong></u><br></p>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">290</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">727</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11420</span><span class="p">,</span><span class="w">
         </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
         </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">7</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538995369</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span></code></pre>
<p>For POST calls to <code>/users-kyc/{{user_id}}</code> the data.result_type is the string &quot;user_kyc&quot; and the key data.user_kyc is an <strong>user-kyc</strong> object if a valid user identifier was provided. A <code>user-kyc</code> object provides properties and status related information of the kyc details that a user had last submitted.</p>
<h2 id='retrieve-user-kyc-details'>Retrieve User KYC Details</h2>
<blockquote>
<p>Example Request code :</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>
<span class="c1"># setup http request</span>
  <span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
     <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
     <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
     <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
     <span class="n">http</span>
  <span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>  
<span class="c1"># Get user kyc details for particular id</span>
<span class="k">def</span> <span class="nf">get_user_kyc_detail</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users-kyc-detail/</span><span class="si">#{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">get_user_kyc_detail</span><span class="p">(</span><span class="mi">11420</span><span class="p">)</span>
</code></pre>
<p>A GET to <code>https://kyc.ost.com/api/v2/users-kyc-detail/{{user_id}}</code> retrieves the details of KYC data an existing user has submitted. You need to supply the user identifier that was returned while creating the user. </p>

<aside class="warning">The kyc data submitted by users is included in the response only based on KYC client's setting in the admin management dashboard. This adds an additional layer of security towards user's data protection.</aside>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>bigint</td>
<td>yes</td>
<td>Unique identifier of the user that is returned upon user creation.</td>
</tr>
</tbody></table>

<p><u><strong>Returns</strong></u><br></p>

<blockquote>
<p>Example Response </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="err">#</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">setting</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">admin</span><span class="w"> </span><span class="err">management</span><span class="w"> </span><span class="err">dashboard</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">OFF</span><span class="w">
</span><span class="p">{</span><span class="w">
   </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc_detail"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">727</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539622156</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">

</span><span class="err">#</span><span class="w"> </span><span class="err">If</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">setting</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">admin</span><span class="w"> </span><span class="err">management</span><span class="w"> </span><span class="err">dashboard</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">ON</span><span class="w">
</span><span class="err">#</span><span class="w"> </span><span class="err">All</span><span class="w"> </span><span class="err">fields</span><span class="w"> </span><span class="err">in</span><span class="w"> </span><span class="err">the</span><span class="w"> </span><span class="err">response</span><span class="w"> </span><span class="err">are</span><span class="w"> </span><span class="err">not</span><span class="w"> </span><span class="err">mandatory.</span><span class="w"> </span><span class="err">They</span><span class="w"> </span><span class="err">vary</span><span class="w"> </span><span class="err">based</span><span class="w"> </span><span class="err">on</span><span class="w"> </span><span class="err">fields</span><span class="w"> </span><span class="err">which</span><span class="w"> </span><span class="err">KYC</span><span class="w"> </span><span class="err">clients</span><span class="w"> </span><span class="err">have</span><span class="w"> </span><span class="err">selected</span><span class="w"> </span><span class="err">for</span><span class="w"> </span><span class="err">their</span><span class="w"> </span><span class="err">users'</span><span class="w"> </span><span class="err">kyc.</span><span class="w">
</span><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc_detail"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"user_kyc_detail"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">727</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539622156</span><span class="p">,</span><span class="w">
            </span><span class="s2">"first_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"sawant"</span><span class="p">,</span><span class="w">                 
            </span><span class="s2">"birthdate"</span><span class="p">:</span><span class="w"> </span><span class="s2">"23/07/1991"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"country"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INDIA"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"nationality"</span><span class="p">:</span><span class="w"> </span><span class="s2">"INDIAN"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"document_id_number"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Ab0bd1234"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"document_id_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/anm15395b85581eab3068cb43ftc0rt1_ROTATE_0?X-Amz-Algorithm=AWS4-HMAC-SHA256.."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"selfie_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/b3vvte895rt5581eab3068cb43ftc0vg1_ROTATE_0?X-Amz-Algorithm=AWS4-HMAC-SHA256.."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"residence_proof_file"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/bty153op985581eab3068cb43ftcqw21_ROTATE_0?X-Amz.."</span><span class="p">,</span><span class="w">
            </span><span class="s2">"investor_proof_files"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
                </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/a3991395b852serab3068cb43ftc0f61_ROTATE_0?X-Amz.."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/a5565395b85581eiop3068cb43ftc0f61_ROTATE_0?X-Amz.."</span><span class="w">
            </span><span class="p">],</span><span class="w">
            </span><span class="s2">"ethereum_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0xEC305b4c269dEd899b6fBA12776fbbDBdC564793"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"estimated_participation_amount"</span><span class="p">:</span><span class="w"> </span><span class="mf">1.1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"street_address"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Hadapsar"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"city"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pune"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"state"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Maharashtra"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"postal_code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"411028"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>For GET calls to <code>/users-kyc-detail/{{user_id}}</code> the data.result_type is the string &quot;user_kyc_detail&quot; and the key in data is dependent on the setting done by the KYC client&#39;s in their admin management dashboard. </p>

<p>If the setting to send KYC data is <code>ON</code> then the key data.user_kyc_detail is an <strong>user_kyc_detail</strong> object if a valid user identifier was provided.</p>

<p>If the setting to send KYC data is <code>OFF</code> then the key data.user_kyc is an object with a few default fields if a valid user identifier was provided.</p>
<h1 id='users-kyc-status'>Users KYC Status</h1><h2 id='the-user-kyc-object'>The User KYC Object</h2>
<blockquote>
<p>Example Response:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">702</span><span class="p">,</span><span class="w">
   </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11430</span><span class="p">,</span><span class="w">
   </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
   </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
   </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539279352</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<table><thead>
<tr>
<th>PARAMETER</th>
<th>TYPE</th>
<th>DESCRIPTION</th>
</tr>
</thead><tbody>
<tr>
<td>id</td>
<td>bigint</td>
<td>Unique identifier of the last submitted kyc of a user</td>
</tr>
<tr>
<td>user_kyc_detail_id</td>
<td>bigint</td>
<td>A unique identifier of the <code>user kyc details</code> object that is returned upon submitting  a user&#39;s kyc details</td>
</tr>
<tr>
<td>user_id</td>
<td>bigint</td>
<td>Unique identifier of the user that is returned upon user creation</td>
</tr>
<tr>
<td>kyc_status</td>
<td>string</td>
<td>A kyc status will be <code>pending</code> until it has been taken up for processing. If the KYC goes through successfully the status will change to <code>approved</code> otherwise <code>denied</code></td>
</tr>
<tr>
<td>admin_status</td>
<td>string</td>
<td>Admin status is helpful for actors doing the KYC checks. <code>unprocessed</code> admin status indicates that the kyc entry needs to be taken care of. If any one of the admins approves a KYC entry the status changes to <code>qualified</code> and in case of a disapproval the status changes to <code>denied</code></td>
</tr>
<tr>
<td>aml_status</td>
<td>string</td>
<td>AML status of KYC will be <code>unprocessed</code> until it has been taken up for processing. It changes to <code>pending</code> while the KYC is being processed. As a result of processing it is either <code>cleared</code> or <code>rejected</code>. If a KYC is cleared via an AML check the admin actor does a manual check and further approves the submission and the status changes to <code>approved</code> or rejects the submission which changes the status to <code>rejected</code>. <code>failed</code> status indicates there was an error in aml processing.</td>
</tr>
<tr>
<td>whitelist_status</td>
<td>string</td>
<td>Whitelisting status will be <code>unprocessed</code> until an approved KYC has been taken up for whitelisting. It changes to <code>started</code> while the whitelisting is in progress. Based on the result of whitelisting process the status is <code>done</code> if it finishes successfully or the status is <code>failed</code> if a technical issue occurs during the process of whitelisting. This is very rare but you will have to contact the OST KYC support team in such situation.</td>
</tr>
<tr>
<td>admin_action_types</td>
<td>array</td>
<td>An array that shows the different kyc issue emails that are sent to the user. The triggers to send emails are <code>data_mismatch</code> , <code>document_issue</code> or an email with custom instructions with action type <code>other_issue</code> ]</td>
</tr>
<tr>
<td>submission_count</td>
<td>integer</td>
<td>A count of number of time KYC is submitted by a user</td>
</tr>
<tr>
<td>last_acted_by</td>
<td>string</td>
<td>Name of the last admin actor who took an action on the KYC. <code>nil</code> value indicates the last action was by the ost kyc system or no action has been taken.</td>
</tr>
<tr>
<td>created_at</td>
<td>timestamp</td>
<td>Timestamp at which user KYC was created. (epoch time in seconds)</td>
</tr>
</tbody></table>
<h2 id='retrieve-kyc-status'>Retrieve KYC Status</h2>
<blockquote>
<p>Example Request code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>

<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>   
<span class="c1"># retrieve user kyc for particular user</span>
<span class="k">def</span> <span class="nf">get_user_kyc</span><span class="p">(</span><span class="n">user_id</span><span class="p">)</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users-kyc/</span><span class="si">#{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">get_user_kyc</span><span class="p">(</span><span class="mi">11430</span><span class="p">)</span>
</code></pre>
<p>A user can submit their KYC details multiple times, a GET to <code>https://kyc.ost.com/api/v2/users-kyc/{{user_id}}</code> retrieves some properties and status related information of the last KYC that a user had submitted. This endpoint however doesn&#39;t returns <code>KYC data</code> submitted by users. You need to supply the identifier that was returned upon user creation for fetching the information.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_id</td>
<td>bigint</td>
<td>yes</td>
<td>Unique identifier of the user whose KYC status information is to be retrieved</td>
</tr>
</tbody></table>

<p><u><strong>Returns</strong></u><br>
For api calls to <code>/users-kyc/{{user_id}}</code> the data.result_type is the string &quot;user_kyc&quot; and the key data.user_kyc is an user-kyc object if a valid identifier was provided. When the requesting ID of a user is not found a 404, resource could not be located error will be returned.</p>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">304</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">702</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11430</span><span class="p">,</span><span class="w">
         </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
         </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539279352</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h2 id='list-kyc-statuses'>List KYC Statuses</h2>
<blockquote>
<p>Example Request code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>

<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>   
<span class="c1"># list kyc status of users </span>
<span class="k">def</span> <span class="nf">get_users_kyc_list</span><span class="p">(</span><span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users-kyc"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">get_users_kyc_list</span><span class="p">()</span>
</code></pre>
<p>A GET to <code>https://kyc.ost.com/api/v2/users-kyc</code> returns a list of all user-kyc objects. A <code>user-kyc</code> object provides some properties and status related information of the kyc details that a user had last submitted. The <code>user-kyc</code> objects are returned sorted by the time when the latest kyc details were submitted, with the most recent <code>user-kyc</code> object appearing first.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>filters</td>
<td>object</td>
<td>no</td>
<td>A filter on the list based on the object <code>filters</code> field. The value can be a boolean or a string</td>
</tr>
<tr>
<td>page_number</td>
<td>integer</td>
<td>no</td>
<td>A field that helps in pagination. page_number is an integer that defines the page of  the list to fetch. For instance, if you make a list request and receive 100 objects, each page sends 10 objects as default limit is 10. If you want to access 45th object your subsequent call can include page_number=5 in order to fetch the 5th page of the list</td>
</tr>
<tr>
<td>order</td>
<td>string</td>
<td>no</td>
<td>A sort order to be applied based on the <code>user-kyc</code> entry creation time. default is desc ( asc / desc )</td>
</tr>
<tr>
<td>limit</td>
<td>integer</td>
<td>no</td>
<td>A limit on the number of <code>user-kyc</code> objects to be sent in one request(min. 1, max. 100, default 10)</td>
</tr>
</tbody></table>

<p><br>
<u><strong>Filter Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>admin_status</td>
<td>string</td>
<td>no</td>
<td>A filter on <code>user-kyc</code> &quot;admin status&quot; :<br> &quot;unprocessed&quot;, <br> &quot;qualified&quot;, <br> &quot;denied&quot;</td>
</tr>
<tr>
<td>aml_status</td>
<td>string</td>
<td>no</td>
<td>A filter on <code>user-kyc</code> aml_status :<br> &quot;cleared:approved&quot;, <br> &quot;unprocessed&quot;, <br> &quot;pending&quot;, <br> &quot;cleared&quot;, <br> &quot;approved&quot;, <br> &quot;rejected&quot;, <br> &quot;failed&quot;.</td>
</tr>
<tr>
<td>whitelist_status</td>
<td>string</td>
<td>no</td>
<td>A filter on <code>user-kyc</code> whitelist_status:<br>&quot;unprocessed&quot;, <br> &quot;started&quot;, <br> &quot;done&quot;, <br> &quot;failed&quot;.</td>
</tr>
<tr>
<td>admin_action_types</td>
<td>string</td>
<td>no</td>
<td>A filter on <code>user-kyc</code> admin_action_types:<br> &quot;no_admin_action&quot;, <br> &quot;data_mismatch&quot;, <br> &quot;document_issue&quot;, <br> &quot;other_issue&quot;</td>
</tr>
</tbody></table>

<p><br>
<u><strong>Returns</strong></u><br></p>

<blockquote>
<p>Example Response code</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"users_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"users_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">298</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">688</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11434</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">25</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539178516</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">297</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">663</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11333</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539171237</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">294</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">656</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11425</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1539093563</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">281</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">601</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11401</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538642905</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">279</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">598</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11399</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1538577254</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">238</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">509</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11341</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1537282934</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">232</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">502</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11332</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1536909857</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">229</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">497</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11329</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"done"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1536755792</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">228</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">496</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11327</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1536755131</span><span class="w">
         </span><span class="p">},</span><span class="w">
         </span><span class="p">{</span><span class="w">
            </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="mi">225</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">493</span><span class="p">,</span><span class="w">
            </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="mi">11322</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"failed"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"admin_action_types"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
            </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w">
            </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin Name"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="mi">1536739936</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="s2">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w">
         </span><span class="s2">"next_page_payload"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"page_number"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
            </span><span class="s2">"filters"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
            </span><span class="s2">"order"</span><span class="p">:</span><span class="w"> </span><span class="s2">"desc"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"limit"</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="w">
         </span><span class="p">}</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>For api calls to <code>/users-kyc/</code> the data.result_type is the string &quot;users_kyc&quot; and the key data.users_kyc is an array of the returned <code>user-kyc</code> objects (10 objects per page). The field data.meta.next_page_payload contains the filter and order information and the page_no number for the next page or is empty for the last page of the list.</p>

<p>Each entry in the array is a separate user_kyc object. If no more <code>user-kyc</code> objects are available, the resulting array will be empty without an error thrown.</p>
<h1 id='utilities'>Utilities</h1><h2 id='get-pre-signed-url-put'>Get Pre-signed URL - PUT</h2>
<blockquote>
<p>Example request code</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>

<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>   

<span class="k">def</span> <span class="nf">get_presigned_url_put</span><span class="p">(</span><span class="n">custom_params</span><span class="p">)</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users-kyc/pre-signed-urls/for-put"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
    <span class="ss">files: </span><span class="p">{</span>
        <span class="ss">residence_proof: </span><span class="s1">'application/pdf'</span><span class="p">,</span>
        <span class="ss">investor_proof_file1: </span><span class="s1">'application/pdf'</span><span class="p">,</span>
        <span class="ss">investor_proof_file2: </span><span class="s1">'application/pdf'</span><span class="p">,</span>
        <span class="ss">document_id: </span><span class="s1">'image/jpeg'</span><span class="p">,</span>
        <span class="ss">selfie: </span><span class="s1">'image/jpeg'</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="n">get_presigned_url_put</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</code></pre>
<p>While filling in KYC details there are identification and other documents that a user submits which are required to be uploaded for verification. The upload functionality is achieved by generating a pre-signed S3 URL. These URLs are used to get temporary access to an otherwise private OST KYC S3 bucket and can be used for putting user documents in that bucket. </p>

<p>A GET to <code>https://kyc.ost.com/api/v2/users-kyc/pre-signed-urls/for-put</code> will generate the pre-signed URL for uploading the documents which we return in the response. We also show example code for consuming the response this endpoint sends.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>files</td>
<td>object</td>
<td>yes</td>
<td>A &#39;files&#39; object. Where data.unique identifier is a key and its content type is a value. <br> Supported content types: <br> &#39;image/jpeg&#39;,<br> &#39;image/png&#39;, <br>&#39;image/jpg&#39;,<br>&#39;application/pdf &#39;</td>
</tr>
</tbody></table>

<p><u><strong>Returns</strong></u><br>
For api calls to <code>/users-kyc/pre-signed-urls/for-put</code> the data.result_type is the string &quot;file_upload_put&quot; and the key data.file_upload_put is a <code>file_upload_put</code> object. The pre-signed URLs will be sent against the unique key. The pre-signed URLs are generated with an expiration time of 15 minutes after which they can not used anymore. </p>

<p>For instance, the value in the key <code>data.file_upload_put.document_id.fields.key</code> in the response will be used to set the value of input parameter <code>document_id_file_path</code> while adding or updating kyc details for a user using the endpoint <code>/users-kyc/{{user_id}}</code></p>

<blockquote>
<p>Example Response code</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="s2">"true"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file_upload_put"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"file_upload_put"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"document_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/anm15395b85581eab3068cb43ftc0rt1?X-Amz-Algorithm=AWS4.."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3/i/anm15395b85581eab3068cb43ftc0rt1"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="s2">"selfie"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/i/b3vvte895rt5581eab3068cb43ftc0vg?X-Amz-Algorithm=AWS4.."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3/i/b3vvte895rt5581eab3068cb43ftc0vg"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="s2">"residence_proof"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/d/276dv5b85581eab3068cb43ftc0rt1?X-Amz-Algorithm=AWS4.."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3/d/276dv5b85581eab3068cb43ftc0rt1"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="s2">"investor_proof_file1"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/d/anm1539uhu33eab3068cb4c0rt1?X-Amz-Algorithm=AWS4.."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3/d/anm1539uhu33eab3068cb4c0rt1"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">},</span><span class="w">
            </span><span class="s2">"investor_proof_file2"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.stagingost.com/3/d/bcbeu8558ksoso68cb43ftc0?X-Amz-Algorithm=AWS4.."</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3/d/bcbeu8558ksoso68cb43ftc0"</span><span class="w">
                    </span><span class="p">}</span><span class="w">
                </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example reference code on how to consume response to upload files:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>

<span class="n">file_path</span> <span class="o">=</span> <span class="s1">'Local_File_Path'</span> <span class="c1"># path of the file to be uploaded</span>
<span class="n">pre_signed_url</span> <span class="o">=</span> <span class="n">response</span><span class="p">[</span><span class="s1">'data'</span><span class="p">][</span><span class="s1">'file_upload_put'</span><span class="p">][</span><span class="s1">'document_id'</span><span class="p">][</span><span class="s1">'url'</span><span class="p">]</span> <span class="c1"># pre signed url for document id</span>
<span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">pre_signed_url</span><span class="p">)</span>

<span class="n">r</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">start</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="ss">:use_ssl</span> <span class="o">=&gt;</span> <span class="kp">true</span><span class="p">)</span> <span class="k">do</span> <span class="o">|</span><span class="n">http</span><span class="o">|</span>
        <span class="n">http</span><span class="p">.</span><span class="nf">send_request</span><span class="p">(</span><span class="s2">"PUT"</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">request_uri</span><span class="p">,</span> <span class="no">File</span><span class="p">.</span><span class="nf">read</span><span class="p">(</span><span class="n">file_path</span><span class="p">),</span> <span class="p">{</span>
          <span class="c1"># This is required, or Net::HTTP will add a default unsigned content-type.</span>
          <span class="s2">"content-type"</span> <span class="o">=&gt;</span> <span class="n">content_type</span>
        <span class="p">})</span>
    <span class="k">end</span>
</code></pre><h2 id='get-pre-signed-url-post'>Get Pre-signed URL - POST</h2>
<blockquote>
<p>Example request code</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>

<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>   

<span class="k">def</span> <span class="nf">get_presigned_url_post</span><span class="p">(</span><span class="n">custom_params</span><span class="p">)</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/users-kyc/pre-signed-urls/for-post"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>

<span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
     <span class="ss">files: </span><span class="p">{</span>
         <span class="ss">document_id: </span><span class="s1">'image/jpeg'</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">}</span>

<span class="n">get_presigned_url_post</span><span class="p">(</span><span class="n">params</span><span class="p">)</span>
</code></pre>
<p>While filling in KYC details there are identification and other documents that a user submits which are required to be uploaded for verification. The upload functionality is achieved by generating a pre-signed S3 URL. These URLs are used to get temporary access to an otherwise private OST KYC S3 bucket and can be used for putting user documents in that bucket. </p>

<p>A GET to <code>https://kyc.ost.com/api/v2/users-kyc/pre-signed-urls/for-post</code> will generate the pre-signed URL for uploading the documents which we return in the response. It allows to upload documents to S3 directly from browser using an HTML form. </p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>files</td>
<td>object</td>
<td>yes</td>
<td>A &#39;files&#39; object. Where data.unique identifier is a key and its content type is a value. <br> Supported content types: <br> &#39;image/jpeg&#39;,<br> &#39;image/png&#39;, <br>&#39;image/jpg&#39;,<br>&#39;application/pdf &#39;</td>
</tr>
</tbody></table>

<p><u><strong>Returns</strong></u><br>
For api calls to <code>/users-kyc/pre-signed-urls/for-post</code> the data.result_type is the string &quot;file_upload_post&quot; and the key data.file_upload_post is a <code>file_upload_post</code> object. The pre-signed URLs will be sent against the unique key. The pre-signed URLs are generated with an expiration time of 15 minutes after which they can not used anymore.</p>

<blockquote>
<p>Example Response code</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
    </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
    </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"file_upload_post"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"file_upload_post"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="s2">"document_id"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="s2">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https://s3.amazonaws.com/kyc.ost.com"</span><span class="p">,</span><span class="w">
                </span><span class="s2">"fields"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="s2">"key"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3/i/b3vvte895rt5581eab3068cb43ftc0vg1"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"x-amz-server-side-encryption"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aws:kms"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"x-amz-server-side-encryption-aws-kms-key-id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5734c3ab-c4ae-4424-a464-2253ui828296"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"policy"</span><span class="p">:</span><span class="w"> </span><span class="s2">"abcdefghijklmnopqrstuvwxvz"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"x-amz-credential"</span><span class="p">:</span><span class="w"> </span><span class="s2">"akiajudralnurkavs5iq/20180123/us-east-1/s3/aws4_request"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"x-amz-algorithm"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aws4-hmac-sha256"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"x-amz-date"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20180123t091405z"</span><span class="p">,</span><span class="w">
                    </span><span class="s2">"x-amz-signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"34cc2f3925c360ecf0ed2ed5a1074f23537807005ffa21e4bc1ebb5225f9875a"</span><span class="w">                

                </span><span class="p">}</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>For using the pre-signed URL to build an HTML Form it is recommended to use some helper to build the form tag and input tags that properly escapes values. To upload a file to S3 using a browser, you need to create a post form. The key <code>data.file_upload_post.document_id.url</code> in the response is the value you should use as the form action.</p>

<aside class="success">
< form action="<%= @data.file_upload_post.document_id.url %>" method="post" enctype="multipart/form-data">
 <br> ... <br>
<\/form>
</aside>

<p>Also the value in the key <code>data.file_upload_post.document_id.fields.key</code> in the response will be used to set the value of input parameter <code>document_id_file_path</code> while adding or updating kyc details for a user using the endpoint <code>/users-kyc/{{user_id}}</code></p>
<h2 id='validate-ethereum-address'>Validate Ethereum Address</h2>
<blockquote>
<p>Example Request code:</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'openssl'</span>
<span class="nb">require</span> <span class="s1">'net/http'</span>
<span class="nb">require</span> <span class="s1">'rails'</span>

<span class="c1"># setup http request</span>
<span class="k">def</span> <span class="nf">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="no">Net</span><span class="o">::</span><span class="no">HTTP</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">uri</span><span class="p">.</span><span class="nf">host</span><span class="p">,</span> <span class="n">uri</span><span class="p">.</span><span class="nf">port</span><span class="p">)</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">use_ssl</span> <span class="o">=</span> <span class="kp">true</span>
  <span class="n">http</span><span class="p">.</span><span class="nf">verify_mode</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">SSL</span><span class="o">::</span><span class="no">VERIFY_PEER</span>
  <span class="n">http</span>
<span class="k">end</span>
<span class="c1"># Make a Get Request</span>
<span class="k">def</span> <span class="nf">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span> <span class="o">=</span> <span class="p">{})</span>
  <span class="n">request_params</span> <span class="o">=</span> <span class="n">base_params</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
  <span class="n">query_string</span> <span class="o">=</span> <span class="n">request_params</span><span class="p">.</span><span class="nf">to_query</span>
  <span class="n">uri</span> <span class="o">=</span> <span class="no">URI</span><span class="p">(</span><span class="s1">'https://kyc.ost.com'</span> <span class="o">+</span> <span class="n">endpoint</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">query_string</span><span class="p">)</span>
  <span class="n">http</span> <span class="o">=</span> <span class="n">setup_request</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span> <span class="o">=</span> <span class="n">http</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="n">uri</span><span class="p">)</span>
  <span class="n">result</span>
<span class="k">end</span>  
<span class="c1"># Verify ethereum address</span>
<span class="k">def</span> <span class="nf">verify_ethereum_address</span><span class="p">(</span><span class="n">custom_params</span><span class="p">)</span>
  <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">"/api/v2/ethereum-address-validation"</span>
  <span class="n">make_get_request</span><span class="p">(</span><span class="n">endpoint</span><span class="p">,</span> <span class="n">custom_params</span><span class="p">)</span>
<span class="k">end</span>
<span class="n">verify_ethereum_address</span><span class="p">(</span><span class="ss">ethereum_address: </span><span class="s2">"0x81b7e08f65bdf5648606c89998a9cc8164397647"</span><span class="p">)</span>
</code></pre>
<p>A GET to <code>https://kyc.ost.com/api/v2/ethereum-address-validation</code> checks if Ethereum Address format is correct.</p>

<p><u><strong>Input Parameters</strong></u></p>

<table><thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Mandatory</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>ethereum_address</td>
<td>string</td>
<td>yes</td>
<td>Ethereum address to be validated.</td>
</tr>
</tbody></table>

<p><u><strong>Returns</strong></u><br>
For api calls to <code>/ethereum-address-validation</code> a success <code>true</code> is sent if the ethereum address is in correct format. And a <code>false</code> in case the format of the ethereum address is in correct.</p>

<blockquote>
<p>Example Response</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre><h1 id='webhooks'>WebHooks</h1>
<p>Webhooks will notify a URL of your choice with information about events that occur while a user registers or user&#39;s KYC is being processed. You can use this data to delete users, determine when a double opt-in is done by a user, react to when a user adds or updates their KYC information, identify when status of a KYC entry is updated, determine when an ethereum address is updated. With different <code>Event Type</code> and <code>Source</code> parameters we provide, you can filter events that can be recieved on a URL which will help you give a clear structure to your KYC processes and flows.</p>

<table><thead>
<tr>
<th>Source</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>web</td>
<td>If the source is web it indicates the action is taken by the user or admin from the website.</td>
</tr>
<tr>
<td>api</td>
<td>If the source is api it indicates an api call was made by the client triggering the event.</td>
</tr>
<tr>
<td>kyc_system</td>
<td>If the source is kyc_system it indicates event was triggered due to internal KYC system updates.</td>
</tr>
</tbody></table>
<h2 id='creat-a-webhook'>Creat A Webhook</h2>
<p>To get started with the Webhooks :</p>

<ol>
<li>Go to the <a href="https://kyc.ost.com/admin/login"><u>OST KYC Dashboard</u></a>.</li>
<li>In the Window, click on to your profile at top-right, open Settings &gt; WebHooks</li>
<li>Click on Add New Webhook.</li>
<li>In the URL field, paste the unique URL that you want to recieve events on.</li>
<li>Select the Filters based on Event Source and Event Type whose notifications you would like to recieve.</li>
<li>Click the ADD button to save these updates.</li>
</ol>

<aside class="success">Each webhook has a Secret Key that does not changes when a webhook is updated. If you wish to change the secret key you will have to independently hit the refresh icon beside the `SECRET KEY` field.</aside>

<aside class="warning">You can configure upto 3 URLs to recieve OST KYC Events information.</aside>
<h2 id='important-details'>Important Details</h2>
<p>Now that you&#39;ve setup Webhooks on the KYC Dashboard, it&#39;s important to note a few points before you start integration. Webhooks notify the URL of your choice via HTTP POST requests. Every https post request is sent with a signature. Details of how the signature is generated are given below. </p>

<p>OST KYC server expects to receive 200 OK in http status code as response within 10 seconds from KYC client server otherwise event will be marked as failed.</p>

<p>Failed events will be retried upto 6 times at an interval of 1 hour increasing exponentially with a factor of 2. Consequently the intervals of retrial will be 1 hr, 2 hrs, 4 hrs, 8 hrs, 16 hrs, 32 hrs. </p>
<h2 id='signature-generation'>Signature Generation</h2>
<p>Every request sent will have two mandatory parameters mentioned below:</p>

<ul>
<li>request_timestamp : the current unix timestamp in seconds.</li>
<li>signature : the signature as the sha256 digest of the secret key and the correctly formatted query string as described below.</li>
</ul>
<h3 id='1-creating-the-string-to-sign-2'>1. Creating the string to sign.</h3>
<blockquote>
<p>Example code to generate signature</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="n">to</span> <span class="n">generate</span> <span class="n">signature</span>

<span class="c1"># For example Webhook url is - https://webhook.ost.com/test/</span>
<span class="c1"># Event parameter to send - {"created_at"=&gt;"1541144915", "data"=&gt;{"result_type"=&gt;"user", "user"=&gt;{"created_at"=&gt;"1541144915", "email"=&gt;"yogesh+13233@ost.com", "id"=&gt;"11493", "properties"=&gt;["doptin_mail_sent"]}}, "description"=&gt;"User has signed up", "id"=&gt;"236", "name"=&gt;"user_register", "source"=&gt;"web", "type"=&gt;"user", "version"=&gt;"v1"} </span>

<span class="nb">require</span> <span class="s1">'rails'</span>

<span class="n">event_data</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"created_at"</span><span class="o">=&gt;</span><span class="s2">"1541144915"</span><span class="p">,</span> <span class="s2">"data"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"result_type"</span><span class="o">=&gt;</span><span class="s2">"user"</span><span class="p">,</span> <span class="s2">"user"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"created_at"</span><span class="o">=&gt;</span><span class="s2">"1541144915"</span><span class="p">,</span> <span class="s2">"email"</span><span class="o">=&gt;</span><span class="s2">"yogesh+13233@ost.com"</span><span class="p">,</span> <span class="s2">"id"</span><span class="o">=&gt;</span><span class="s2">"11493"</span><span class="p">,</span> <span class="s2">"properties"</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"doptin_mail_sent"</span><span class="p">]}},</span> <span class="s2">"description"</span><span class="o">=&gt;</span><span class="s2">"User has signed up"</span><span class="p">,</span> <span class="s2">"id"</span><span class="o">=&gt;</span><span class="s2">"236"</span><span class="p">,</span> <span class="s2">"name"</span><span class="o">=&gt;</span><span class="s2">"user_register"</span><span class="p">,</span> <span class="s2">"source"</span><span class="o">=&gt;</span><span class="s2">"web"</span><span class="p">,</span> <span class="s2">"type"</span><span class="o">=&gt;</span><span class="s2">"user"</span><span class="p">,</span> <span class="s2">"version"</span><span class="o">=&gt;</span><span class="s2">"v1"</span><span class="p">}</span> 

<span class="n">webhook_url</span><span class="o">=</span> <span class="s2">"https://webhook.ost.com/test/"</span>

<span class="k">def</span> <span class="nf">generate_signature</span><span class="p">(</span><span class="n">string_to_sign</span><span class="p">)</span>
  <span class="n">digest</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">)</span>
  <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="s1">'WEBHOOK_SECRET_KEY'</span><span class="p">,</span> <span class="n">string_to_sign</span><span class="p">)</span> <span class="c1"># Make sure to replace `API_SECRET` with your API secret key.</span>
<span class="k">end</span>

<span class="n">params</span> <span class="o">=</span> <span class="n">event_data</span><span class="p">.</span><span class="nf">merge</span><span class="p">(</span><span class="s2">"request_timestamp"</span> <span class="o">=&gt;</span> <span class="no">Time</span><span class="p">.</span><span class="nf">now</span><span class="p">.</span><span class="nf">to_i</span><span class="p">)</span>
<span class="n">string_to_sign</span> <span class="o">=</span> <span class="n">webhook_url</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">params</span><span class="p">.</span><span class="nf">to_query</span>

<span class="c1">#generated string_to_sign</span>
<span class="c1">#https://webhook.ost.com/test/?created_at=1541144915&amp;data%5Bresult_type%5D=user&amp;data%5Buser%5D%5Bcreated_at%5D=1541144915&amp;data%5Buser%5D%5Bemail%5D=yogesh%2B13233%40ost.com&amp;data%5Buser%5D%5Bid%5D=11493&amp;data%5Buser%5D%5Bproperties%5D%5B%5D=doptin_mail_sent&amp;description=User+has+signed+up&amp;id=236&amp;name=user_register&amp;request_timestamp=1542185198&amp;source=web&amp;type=user&amp;version=v1</span>

<span class="n">signature</span> <span class="o">=</span> <span class="n">generate_signature</span><span class="p">(</span><span class="n">string_to_sign</span><span class="p">)</span>

<span class="c1">#generated signature -&gt; "34e852b1bb2b73357483ce7d35a837611f098f9e7df580edb0bb735993868c0a"</span>

</code></pre>
<p>The string to sign is formed by concatenating the following elements:</p>

<ul>
<li>Webhook URL given for notification</li>
<li>request_timestamp</li>
<li>Event parameters </li>
</ul>

<aside class="warning">Note all the inputs must be alphabetically sorted on the keys. (asc)</aside>
<h3 id='2-generating-a-signature-2'>2. Generating a signature.</h3>
<blockquote>
<p>Example code to verify signature.</p>
</blockquote>
<pre class="highlight ruby tab-ruby"><code><span class="nb">require</span> <span class="s1">'rails'</span>

<span class="n">received_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">"created_at"</span><span class="o">=&gt;</span><span class="s2">"1541144915"</span><span class="p">,</span> <span class="s2">"data"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"result_type"</span><span class="o">=&gt;</span><span class="s2">"user"</span><span class="p">,</span> <span class="s2">"user"</span><span class="o">=&gt;</span><span class="p">{</span><span class="s2">"created_at"</span><span class="o">=&gt;</span><span class="s2">"1541144915"</span><span class="p">,</span> <span class="s2">"email"</span><span class="o">=&gt;</span><span class="s2">"yogesh+13233@ost.com"</span><span class="p">,</span> <span class="s2">"id"</span><span class="o">=&gt;</span><span class="s2">"11493"</span><span class="p">,</span> <span class="s2">"properties"</span><span class="o">=&gt;</span><span class="p">[</span><span class="s2">"doptin_mail_sent"</span><span class="p">]}},</span> <span class="s2">"description"</span><span class="o">=&gt;</span><span class="s2">"User has signed up"</span><span class="p">,</span> <span class="s2">"id"</span><span class="o">=&gt;</span><span class="s2">"236"</span><span class="p">,</span> <span class="s2">"name"</span><span class="o">=&gt;</span><span class="s2">"user_register"</span><span class="p">,</span> <span class="s2">"source"</span><span class="o">=&gt;</span><span class="s2">"web"</span><span class="p">,</span> <span class="s2">"type"</span><span class="o">=&gt;</span><span class="s2">"user"</span><span class="p">,</span> <span class="s2">"version"</span><span class="o">=&gt;</span><span class="s2">"v1"</span><span class="p">,</span> <span class="s2">"signature"</span> <span class="o">=&gt;</span> <span class="s2">"34e852b1bb2b73357483ce7d35a837611f098f9e7df580edb0bb735993868c0a"</span><span class="p">,</span> <span class="s2">"request_timestamp"</span> <span class="o">=&gt;</span> <span class="mi">1542185198</span><span class="p">}</span> 

<span class="n">webhook_url</span><span class="o">=</span> <span class="s2">"https://webhook.ost.com/test/"</span>
<span class="n">signature</span> <span class="o">=</span> <span class="n">received_params</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="s2">"signature"</span><span class="p">)</span>


<span class="n">string_to_sign</span> <span class="o">=</span> <span class="n">webhook_url</span> <span class="o">+</span> <span class="s2">"?"</span> <span class="o">+</span> <span class="n">received_params</span><span class="p">.</span><span class="nf">to_query</span>
<span class="c1"># parameters sorted alphabetically</span>
<span class="c1">#string_to_sign = "https://webhook.ost.com/test/?created_at=1541144915&amp;data%5Bresult_type%5D=user&amp;data%5Buser%5D%5Bcreated_at%5D=1541144915&amp;data%5Buser%5D%5Bemail%5D=yogesh%2B13233%40ost.com&amp;data%5Buser%5D%5Bid%5D=11493&amp;data%5Buser%5D%5Bproperties%5D%5B%5D=doptin_mail_sent&amp;description=User+has+signed+up&amp;id=236&amp;name=user_register&amp;request_timestamp=1542185198&amp;source=web&amp;type=user&amp;version=v1"</span>

<span class="n">digest</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">Digest</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s1">'sha256'</span><span class="p">)</span>
<span class="n">generated_signature</span> <span class="o">=</span> <span class="no">OpenSSL</span><span class="o">::</span><span class="no">HMAC</span><span class="p">.</span><span class="nf">hexdigest</span><span class="p">(</span><span class="n">digest</span><span class="p">,</span> <span class="s1">'WEBHOOK_SECRET_KEY'</span><span class="p">,</span> <span class="n">string_to_sign</span><span class="p">)</span> <span class="c1"># Make sure to replace `WEBHOOK_SECRET_KEY` with your Webhook secret key.</span>

<span class="k">if</span> <span class="n">signature</span> <span class="o">==</span> <span class="n">generated_signature</span>
<span class="c1">#signature authenticated</span>
<span class="k">else</span>
<span class="c1"># invalid signature</span>
<span class="k">end</span>

</code></pre>
<p>The signature is the sha256 digest of the secret key and the correctly formatted string-to-sign.</p>

<p>generated_signature = Hmac_Sha256_Hexdigest(string-to-sign, secret-key)</p>
<h2 id='user-events'>User Events</h2>
<blockquote>
<p>Example Webhook Response for register event</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144915"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144915"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh+13233@ost.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11493"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"doptin_mail_sent"</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User has signed up"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"236"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_register"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144919"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"fae67f17bf5b2ae39e8816952cac76a189997ebaf0f42dcae79ca649dafa6f51"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Webhook Response for double opt-in event</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541152654"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144915"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh+13233@ost.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11493"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"doptin_mail_sent"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"doptin_done"</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User has done double opt in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"241"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_dopt_in"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541152655"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"4f98e901170adad77278ced8fa4f76dbbf7080058bbb8bd5d2b8755dd72251ce"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Webhook Response for delete user event</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144571"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144915"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"email"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh@ost.com"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11404"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"properties"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="s2">"doptin_mail_sent"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"doptin_done"</span><span class="p">,</span><span class="w">
            </span><span class="s2">"kyc_submitted"</span><span class="w">
         </span><span class="p">]</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User was deletd by admin"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"234"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_deleted"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144575"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d044b907f7aa8f17b14fbf792612714e65e76097136ca2d6ec7018f1c61dcf86"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>User events indicate a user&#39;s status in the system at that point in time. User events include register, double_opt_in and delete.</p>

<table><thead>
<tr>
<th>Event Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>user_register</td>
<td>user</td>
<td>User has successfully registered.</td>
</tr>
<tr>
<td>user_dopt_in</td>
<td>user</td>
<td>User has accepted the double opt-in email.</td>
</tr>
<tr>
<td>user_deleted</td>
<td>user</td>
<td>User has been deleted from the system.</td>
</tr>
</tbody></table>
<h2 id='user-kyc-events'>User KYC Events</h2>
<blockquote>
<p>Example Webhook Response for user KYC submit event</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541753766"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541753703"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"337"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
         </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11483"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"820"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"User has submitted kyc data"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"345"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kyc_submit"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541753770"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ef55a8e894b0ff94b4cfc245921aafb1644938c101c8d8e27c8397c938d9c07f"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"api"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Webhook Response for Etherum Address Update event</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541756913"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541755701"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"338"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"all is well kyc"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11497"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"823"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Admin has updates ethereum address of user"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"353"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"update_ethereum_address"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541756919"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"d489a5c8a796ac0652df7d76c62b2d5d6819c78f4d68040929d99490dad9cfc9"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Webhook Response when a KYC entry is re-opened</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144431"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1538648382"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"284"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"pending"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh + 6"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11404"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"613"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user kyc case was reopened by admin"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"232"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kyc_reopen"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541144436"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"475dd44692bf50cd206fb29df4c023ed056b63e6f84933586242d056f72fc025"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<blockquote>
<p>Example Webhook Response when status of a KYC entry changes</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
   </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541154581"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"data"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
      </span><span class="s2">"result_type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
      </span><span class="s2">"user_kyc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
         </span><span class="s2">"admin_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"qualified"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"aml_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"cleared"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"created_at"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541152723"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"328"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"kyc_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"approved"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"last_acted_by"</span><span class="p">:</span><span class="w"> </span><span class="s2">"yogesh + 6"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"submission_count"</span><span class="p">:</span><span class="w"> </span><span class="s2">"3"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"11493"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"user_kyc_detail_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"790"</span><span class="p">,</span><span class="w">
         </span><span class="s2">"whitelist_status"</span><span class="p">:</span><span class="w"> </span><span class="s2">"unprocessed"</span><span class="w">
      </span><span class="p">}</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="s2">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user kyc state has changed"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"256"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"kyc_status_update"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"request_timestamp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1541154583"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"signature"</span><span class="p">:</span><span class="w"> </span><span class="s2">"5edf777d1283bd37397285288cd27d73d06f4b912250ebf579455103e2a2927a"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"source"</span><span class="p">:</span><span class="w"> </span><span class="s2">"web"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"user_kyc"</span><span class="p">,</span><span class="w">
   </span><span class="s2">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"v1"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>User KYC events indicate the status of user&#39;s KYC entry in the system at a given point in time. User KYC events include submit KYC, Update Ethereum Address, KYC entry re-opened and KYC entry status changes. </p>

<table><thead>
<tr>
<th>Event Name</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>kyc_submit</td>
<td>user_kyc</td>
<td>User has added or updated the KYC information in the system.</td>
</tr>
<tr>
<td>update_ethereum_address</td>
<td>user_kyc</td>
<td>User&#39;s ethereum address has been updated.</td>
</tr>
<tr>
<td>kyc_reopen</td>
<td>user_kyc</td>
<td>An approved or rejected KYC application of a user has been re-opened.</td>
</tr>
<tr>
<td>kyc_status_update</td>
<td>user_kyc</td>
<td>Status of KYC entry changes in following cases <br> <code>aml_status</code> :  When AML status for a KYC entry changes the event is triggered. <br> <code>admin_action_types</code> : When admin reports any issue against a KYC entry in the OST KYC dashboard the event is triggered. <br> <code>admin_status</code> : Whenever the admin qualifies or denies the KYC entry the event is triggered. <br> <code>whitelist_status</code> :  When the whitelist status for a KYC entry changes after kyc is approved the event is triggered.</td>
</tr>
</tbody></table>
<h1 id='errors'>Errors</h1>
<p>We use HTTP response status codes to indicate the success or failure of an API request. OST KYC returns <code>4xx</code> or <code>5xx</code> status codes.</p>

<blockquote>
<p>In reponse to failed requests an error object is included in the response body that includes additional error details in this format : </p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"success"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
  </span><span class="s2">"err"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="s2">"code"</span><span class="p">:</span><span class="w"> </span><span class="s2">"SHORT STRING CODE"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"ERROR DESCRIPTION"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"internal_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"internal debug info code"</span><span class="p">,</span><span class="w">

    </span><span class="err">//</span><span class="w"> </span><span class="err">Some</span><span class="w"> </span><span class="err">types</span><span class="w"> </span><span class="err">of</span><span class="w"> </span><span class="err">errors</span><span class="w"> </span><span class="err">also</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">an</span><span class="w"> </span><span class="err">error_data</span><span class="w"> </span><span class="err">array</span><span class="w"> 
    </span><span class="err">//that</span><span class="w"> </span><span class="err">gives</span><span class="w"> </span><span class="err">additiional</span><span class="w"> </span><span class="err">information</span><span class="w"> </span><span class="err">at</span><span class="w"> </span><span class="err">parameter</span><span class="w"> </span><span class="err">level</span><span class="p">:</span><span class="w">
    </span><span class="s2">"error_data"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{</span><span class="w">
        </span><span class="s2">"parameter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"field name"</span><span class="p">,</span><span class="w">
        </span><span class="s2">"msg"</span><span class="p">:</span><span class="w"> </span><span class="s2">"problem with the field"</span><span class="w">
      </span><span class="p">}</span><span class="w">
      </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>We return following HTTP status codes and corresponding short string codes for failed requests:</p>

<table><thead>
<tr>
<th>HTTP status code</th>
<th>String codes</th>
<th>Error messages</th>
<th>Cause and actionable steps</th>
</tr>
</thead><tbody>
<tr>
<td>400</td>
<td>BAD_REQUEST</td>
<td>At least one parameter is invalid or missing. See &quot;err.error_data&quot; array for more details.</td>
<td>Check the API Documentation for the endpoint to see which values are required. To prevent validation errors, ensure that parameters are of the right type.</td>
</tr>
<tr>
<td>401</td>
<td>UNAUTHORIZED</td>
<td>We could not authenticate the request. Please review your credentials and authentication method.</td>
<td>Check <u>Authentication Section</u> to understand the API signature generation steps.</td>
</tr>
<tr>
<td>403</td>
<td>FORBIDDEN</td>
<td>Access to the resource is not permitted for some reason besides authentication</td>
<td>Check for permission issues.</td>
</tr>
<tr>
<td>404</td>
<td>NOT_FOUND</td>
<td>The requested resource could not be located.</td>
<td>Please check the information provided. The server did not find anything that matches the request URI. Either the URI is incorrect or the resource is not available. For example, in-correct &#39;id&#39; passed while retrieving a user.</td>
</tr>
<tr>
<td>422</td>
<td>UNPROCESSABLE_ENTITY</td>
<td>An error occurred while processing the request.</td>
<td>The API cannot complete the requested action, might require interaction with processes outside of the current request OR is failing business validations thats not a 400 type of validation. Check the information provided or get in touch on <a href="https://help.ost.com"><u>help.ost.com</u></a></td>
</tr>
<tr>
<td>429</td>
<td>TOO_MANY_REQUESTS</td>
<td>Too many requests recieved.</td>
<td>Too many requests recieved.</td>
</tr>
</tbody></table>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="ruby">Ruby</a>
          </div>
      </div>
    </div>
  </body>
</html>
